<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:models="clr-namespace:CbetaTranslator.App.Models"
             x:Class="CbetaTranslator.App.Views.SearchTabView">

	<Grid RowDefinitions="Auto,Auto,Auto,*" RowSpacing="10">

		<Border Grid.Row="0"
				Background="{DynamicResource PanelAltBg}"
				Padding="10"
				CornerRadius="8">
			<Grid ColumnDefinitions="*,Auto,Auto,Auto"
				  RowDefinitions="Auto,Auto"
				  ColumnSpacing="10"
				  RowSpacing="8">

				<TextBox Name="TxtQuery"
						 Grid.Row="0"
						 Grid.Column="0"
						 Watermark="Search (CJK phrases, substrings)â€¦"/>

				<Button Name="BtnSearch" Grid.Row="0" Grid.Column="1" Content="Search"/>
				<Button Name="BtnCancel" Grid.Row="0" Grid.Column="2" Content="Cancel" IsEnabled="False"/>
				<Button Name="BtnBuildIndex" Grid.Row="0" Grid.Column="3" Content="Build/Update Index"/>

				<StackPanel Grid.Row="1"
							Grid.Column="0"
							Orientation="Horizontal"
							Spacing="14">
					<CheckBox Name="ChkOriginal" Content="Original" IsChecked="True"/>
					<CheckBox Name="ChkTranslated" Content="Translated" IsChecked="False"/>

					<TextBlock Text="Status:" VerticalAlignment="Center" Margin="10,0,0,0" Classes="muted"/>
					<ComboBox Name="CmbStatus" Width="160"/>

					<TextBlock Text="Context:" VerticalAlignment="Center" Margin="10,0,0,0" Classes="muted"/>
					<ComboBox Name="CmbContext" Width="120"/>
				</StackPanel>

				<TextBlock Name="TxtProgress"
						   Grid.Row="1"
						   Grid.Column="1"
						   Grid.ColumnSpan="3"
						   VerticalAlignment="Center"
						   TextWrapping="Wrap"
						   Classes="muted"/>
			</Grid>
		</Border>

		<Border Grid.Row="1"
				Background="{DynamicResource PanelBg}"
				BorderBrush="{DynamicResource PanelBorder}"
				BorderThickness="1"
				CornerRadius="8"
				Padding="8">
			<DockPanel LastChildFill="True">
				<TextBlock Name="TxtSummary"
						   DockPanel.Dock="Left"
						   VerticalAlignment="Center"
						   Text="Ready."
						   Classes="muted"/>
				<Button Name="BtnExportTsv"
						DockPanel.Dock="Right"
						Content="Export TSV"
						IsEnabled="False"/>
			</DockPanel>
		</Border>

		<Border Grid.Row="2"
				Background="{DynamicResource PanelBg}"
				BorderBrush="{DynamicResource PanelBorder}"
				BorderThickness="1"
				CornerRadius="8"
				Padding="8">

			<Expander Name="ExpCooc" IsExpanded="False">

				<Expander.Header>
					<DockPanel LastChildFill="True">
						<TextBlock Text="" DockPanel.Dock="Left" />
						<ComboBox Name="CmbCoocMetric"
								  DockPanel.Dock="Right"
								  Width="320"/>
					</DockPanel>
				</Expander.Header>

				<Grid MaxHeight="360">

					<Grid Name="GridMetricView"
						  ColumnDefinitions="*,*"
						  RowDefinitions="Auto,*"
						  ColumnSpacing="10"
						  RowSpacing="8">

						<StackPanel Grid.Row="0" Grid.ColumnSpan="2" Orientation="Horizontal" Spacing="12">
							<TextBlock Name="TxtCoocSummary" Text="No data yet." Classes="muted"/>
						</StackPanel>

						<Border Grid.Row="1" Grid.Column="0"
								Background="{DynamicResource PanelAltBg}"
								CornerRadius="6"
								Padding="8">
							<StackPanel Spacing="6">
								<TextBlock Name="TxtLeftTitle" Text="Left" Classes="muted"/>
								<ListBox Name="LstCoocChars" Height="220"/>
							</StackPanel>
						</Border>

						<Border Grid.Row="1" Grid.Column="1"
								Background="{DynamicResource PanelAltBg}"
								CornerRadius="6"
								Padding="8">
							<StackPanel Spacing="6">
								<TextBlock Name="TxtRightTitle" Text="Right" Classes="muted"/>
								<ListBox Name="LstCoocNgrams" Height="220"/>
								<TextBlock Name="TxtZipf" TextWrapping="Wrap" Classes="muted"/>
							</StackPanel>
						</Border>

					</Grid>

					<ScrollViewer Name="ScrollMetricGuide"
								  IsVisible="False"
								  MaxHeight="360"
								  VerticalScrollBarVisibility="Auto"
								  HorizontalScrollBarVisibility="Disabled">

						<Border Background="{DynamicResource PanelAltBg}" CornerRadius="6" Padding="10">
							<TextBlock Name="TxtMetricGuide"
									   TextWrapping="Wrap"/>
						</Border>

					</ScrollViewer>

				</Grid>

			</Expander>

		</Border>

		<Border Grid.Row="3"
				Background="{DynamicResource PanelBg}"
				BorderBrush="{DynamicResource PanelBorder}"
				BorderThickness="1"
				CornerRadius="8"
				Padding="8">
			<TreeView Name="ResultsTree"
					  Background="{DynamicResource ControlBg}"
					  BorderBrush="{DynamicResource BorderBrush}"
					  BorderThickness="1">

				<TreeView.DataTemplates>
					<TreeDataTemplate DataType="models:SearchResultGroup" ItemsSource="{Binding Children}">
						<TextBlock Text="{Binding HeaderText}"
								   ToolTip.Tip="{Binding Tooltip}"
								   TextWrapping="NoWrap"/>
					</TreeDataTemplate>

					<DataTemplate DataType="models:SearchResultChild">
						<TextBlock Text="{Binding RowText}"
								   TextWrapping="NoWrap"/>
					</DataTemplate>
				</TreeView.DataTemplates>

			</TreeView>
		</Border>

	</Grid>
</UserControl>
