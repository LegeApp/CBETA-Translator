<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:views="clr-namespace:CbetaTranslator.App.Views"
             x:Class="CbetaTranslator.App.Views.ReadableTabView">

	<Grid RowDefinitions="Auto,Auto,*,Auto">

		<StackPanel Grid.Row="0"
					Orientation="Horizontal"
					Spacing="8"
					Margin="0,0,0,8">
			<Button Name="BtnAddCommunityNote"
					Content="Add community note"
					Focusable="False"/>
		</StackPanel>

		<Border Name="FindBar"
				Grid.Row="1"
				Background="{DynamicResource PanelAltBg}"
				Padding="8"
				CornerRadius="8"
				Margin="0,0,0,8"
				IsVisible="False">
			<DockPanel LastChildFill="True">
				<TextBlock Name="FindScope"
						   DockPanel.Dock="Left"
						   Classes="muted"
						   VerticalAlignment="Center"
						   Margin="0,0,10,0"
						   Text="Find:" />

				<TextBox Name="FindQuery"
						 Watermark="Find…"
						 MinWidth="260"
						 VerticalAlignment="Center"/>

				<StackPanel DockPanel.Dock="Right" Orientation="Horizontal" Spacing="8" Margin="10,0,0,0">
					<TextBlock Name="FindCount"
							   Classes="muted"
							   VerticalAlignment="Center"
							   Text="0/0" />
					<Button Name="BtnPrev" Content="Prev" />
					<Button Name="BtnNext" Content="Next" />
					<Button Name="BtnCloseFind" Content="✕" />
				</StackPanel>
			</DockPanel>
		</Border>

		<Grid Grid.Row="2" ColumnDefinitions="1*,Auto,2*" Margin="0">

			<Border Background="{DynamicResource PanelBg}"
					BorderBrush="{DynamicResource PanelBorder}"
					BorderThickness="1"
					CornerRadius="6">
				<Grid RowDefinitions="Auto,*">
					<Border Background="{DynamicResource PanelBg}" Padding="8">
						<TextBlock Text="Original (read-only)" Classes="muted"/>
					</Border>

					<Grid Grid.Row="1">
						<TextBox Name="EditorOriginal"
								 IsReadOnly="True"
								 AcceptsReturn="True"
								 TextWrapping="Wrap"
								 FontFamily="Consolas"
								 Background="Transparent"
								 BorderThickness="0"
								 ScrollViewer.VerticalScrollBarVisibility="Visible"
								 ScrollViewer.HorizontalScrollBarVisibility="Disabled"/>

						<views:SearchHighlightOverlay Name="HlOriginal"
													  IsHitTestVisible="False"/>
					</Grid>
				</Grid>
			</Border>

			<GridSplitter Grid.Column="1" Width="6" Background="{DynamicResource SplitterBrush}"/>

			<Border Grid.Column="2"
					Background="{DynamicResource PanelBg}"
					BorderBrush="{DynamicResource PanelBorder}"
					BorderThickness="1"
					CornerRadius="6">
				<Grid RowDefinitions="Auto,*">
					<Border Background="{DynamicResource PanelBg}" Padding="8">
						<TextBlock Text="Translated (readable view)" Classes="muted"/>
					</Border>

					<Grid Grid.Row="1">
						<TextBox Name="EditorTranslated"
								 IsReadOnly="True"
								 AcceptsReturn="True"
								 TextWrapping="Wrap"
								 FontFamily="Consolas"
								 Background="Transparent"
								 BorderThickness="0"
								 ScrollViewer.VerticalScrollBarVisibility="Visible"
								 ScrollViewer.HorizontalScrollBarVisibility="Disabled"/>

						<views:SearchHighlightOverlay Name="HlTranslated"
													  IsHitTestVisible="False"/>
					</Grid>
				</Grid>
			</Border>

		</Grid>

		<Border Grid.Row="3"
				Name="NotesPanel"
				IsVisible="False"
				Background="{DynamicResource PanelAltBg}"
				BorderBrush="{DynamicResource PanelBorder}"
				BorderThickness="1"
				CornerRadius="8"
				Margin="0,8,0,0"
				Padding="10">

			<Grid RowDefinitions="Auto,*" ColumnDefinitions="*,Auto">
				<TextBlock Name="NotesHeader"
						   Grid.Row="0" Grid.Column="0"
						   FontWeight="SemiBold"
						   Text="Note" />

				<StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" Spacing="6">
					<Button Name="BtnDeleteCommunityNote" Content="Delete" Padding="10,2" />
					<Button Name="BtnCloseNotes" Content="✕" Padding="8,2" />
				</StackPanel>

				<ScrollViewer Grid.Row="1"
							  Grid.ColumnSpan="2"
							  MaxHeight="160"
							  VerticalScrollBarVisibility="Auto"
							  HorizontalScrollBarVisibility="Disabled">
					<TextBox Name="NotesBody"
							 IsReadOnly="True"
							 AcceptsReturn="True"
							 TextWrapping="Wrap"
							 Background="Transparent"
							 BorderThickness="0"/>
				</ScrollViewer>
			</Grid>

		</Border>

	</Grid>
</UserControl>
